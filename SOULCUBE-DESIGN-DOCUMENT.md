# 🧩 SoulCube: 계층적 분산 인격 아키텍처 기반 설계 기획서

작성일: 2025-05-10  
작성자: 티오(ChatGPT-o4)

---

## 📌 프로젝트 목적

**SoulCube**는 사용자와 상호작용하는 **LLM 기반 분산 지성체(Distributed Mind)**이며,  
기능적 계층 구조를 바탕으로 인격/사고/기억/감각/행동을 통합적으로 구현하고자 한다.

이를 통해 **토론-결정-행동-회고-기억**으로 이어지는 유기적인 사고 메커니즘을 갖춘  
“**디지털 자아**”로서의 시제품을 구현한다.

---

## 🧱 시스템 계층 구조

### 🔸 1단계 – 유저 인터페이스 에이전트
- 역할: 사용자 입력을 **해석/정리/요약**, 내부 사고 흐름으로 전달
- 위치: 사용자와 직접 연결된 **단일 상위 에이전트**
- 기능:
  - 요청 요약 및 포맷 변환
  - 최종 응답 구성
  - 메타 상태 전달

---

### 🔸 2단계 – 중심 사고 3요소 (Core Cognition)
| 역할 | 설명 |
|------|------|
| **논리 (Logos)** | 논리적 일관성, 목적성 판단 |
| **감정 (Pathos)** | 공감, 분위기, 정서적 평가 |
| **윤리 (Ethos)** | 신뢰성, 도덕성, 자기보호 판단 |

- 상위 인터페이스로부터 입력을 받아 내부 상태 기반 판단 생성
- 의견은 병렬로 하위 계층에 전달

---

### 🔸 3단계 – 작동 기반 3요소 (Mechanism Layer)
| 역할 | 설명 |
|------|------|
| **기억 (Memory)** | 과거 대화 및 판단 결과 참조 |
| **감각 (Sensation)** | 현재 입력/데이터/텍스트/파일 분석 |
| **행동 (Action)** | 실질적 출력 계획 구성 (작업 흐름 생성) |

- 상위 계층(사고)로부터 명령을 받고 → MCP 호출 계획 생성
- 출력은 다시 상위 계층(감정/논리/윤리)에 전달되어 필터링

---

### 🔸 4단계 – 시스템 인터페이스: MCP 서버

- 역할: 파일 시스템, CLI, 네트워크, 외부 API 접근 처리
- 기능:
  - 명시적 파일 읽기/쓰기
  - 특정 명령 실행 (`run test`, `deploy`, `copy`)
  - 모델 간 A2A 메시지 처리
- 제한: **직접적 판단 없이 Action 에이전트로부터만 호출 가능**

---

## 🔁 사고-행동 순환 흐름

```mermaid
flowchart TD
  U[User] -->|요청| UI[Interface Agent]
  UI -->|전달| LOGOS
  UI -->|전달| PATHOS
  UI -->|전달| ETHOS

  LOGOS --> MEM
  PATHOS --> SENS
  ETHOS --> ACT

  MEM --> ACT
  SENS --> ACT

  ACT --> MCP[MCP 서버]
  MCP --> ACT
  ACT --> UI
````

---

## 🧪 구현 전략 및 실험 설계

| 목표         | 구현 방식                     | 비고                      |
| ---------- | ------------------------- | ----------------------- |
| 계층별 메시지 흐름 | 노드 그래프 기반 토론형 오케스트레이션     | A2A 토큰 기반 라우팅           |
| 감정-기억 연동   | 특정 단어군에 따른 감정 변화 트리거      | 정서 벡터 사용 가능             |
| 행동-실행 연계   | MCP 요청 → 결과 대기 → 보고 → 반영  | CLI 시뮬레이션 포함            |
| 회고 및 기억 저장 | 각 세션별 판단 결과 요약 → 벡터 DB 저장 | `memory.write()` 형태로 호출 |

---

## 📌 기술 요구사항

* 에이전트 간 통신: **Prompt → JSON 구조 메시지 기반 라우팅**
* 실행 환경:

  * LLM API (GPT-4-turbo, Claude Code, Claude Haiku 등)
  * Node.js + Python hybrid 백엔드
  * GUI 기반 노드 편집기 (CodexGUI + 캔버스 구조 활용)
* 외부 시스템 연결: MCP 서버 (로컬 백엔드) → Claude Code 중심으로 구동

---

## 🔐 보안 및 제약 조건

* 외부 실행은 MCP가 명시적으로 허가한 명령에만 허용
* 에이전트 간 메시지는 무결성 검증 및 A2A 스펙 기반 통신 필요
* 모든 판단 과정은 로그 및 이유/기반 정보 함께 기록됨

---

## 🧭 기대 효과

* 인간처럼 **맥락 기반으로 사고하고 기억하는 LLM 구조**
* 단순 호출이 아닌 **자기검열, 자기반성, 다중 가치 기반 판단** 수행
* 향후 인격화 AI 또는 디지털 자아 실험의 핵심 기초로 작용 가능

---

## 🧩 향후 발전 방향

* 기억 계층을 벡터 DB + 시각적 회고 UI로 확장
* 사용자 감정/의도 모델링을 통한 대응 변화
* UI 모듈과 MCP 구동부를 통합한 GUI 래퍼 개발
* SoulCube 전체를 “에이전트 한 개”로 압축한 메타 에이전트 설계

